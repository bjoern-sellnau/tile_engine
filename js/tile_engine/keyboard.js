function newKeyboard(){	var keyboard = {		orientation: {},LEFT: 37,RIGHT: 39,UP: 38,DOWN: 40,    thrust: 10,	maxSpeed: 100, key_down: false,_focus:false,    ctx_click:false, doc_click: false,    dx: 0, dy: 0, decay: 0.97,    init: function(context) {      $(document).keydown(function(event){keyboard.keydown(event)})                 .keyup(function(event){keyboard.keyup(event)})                       $(context).mouseup(function(event){keyboard.ctx_click = true;})			$(document).keydown(keyboard.keydown)                 .keyup(keyboard.keyup)                 .mousedown(function(event){keyboard.doc_click = true;})                 .mouseup(function(event){keyboard._focus = keyboard.ctx_click && keyboard.doc_click;keyboard.doc_click = keyboard.ctx_click = false;})                       setInterval(keyboard.update,1)    },    keydown: function (event){      keyboard.orientation[event.keyCode] = keyboard._focus;      keyboard.key_down = keyboard._focus;    },    keyup: function (event){      keyboard.orientation[event.keyCode] = false;      keyboard.key_down = false;    },    update: function(){            if (keyboard.orientation[keyboard.LEFT])keyboard.dx -= keyboard.thrust;      if (keyboard.orientation[keyboard.RIGHT])keyboard.dx += keyboard.thrust;      if (keyboard.orientation[keyboard.UP])keyboard.dy += keyboard.thrust;      if (keyboard.orientation[keyboard.DOWN])keyboard.dy -= keyboard.thrust;      //speed limit      var currentSpeed = Math.sqrt((keyboard.dx * keyboard.dx) + (keyboard.dy * keyboard.dy));      if (currentSpeed > keyboard.maxSpeed){        keyboard.dx *= keyboard.maxSpeed/currentSpeed;        keyboard.dy *= keyboard.maxSpeed/currentSpeed;      }      keyboard.dx *= keyboard.decay;      keyboard.dy *= keyboard.decay;            keyboard.dx = Math.round(keyboard.dx*Math.pow(10,2))/Math.pow(10,2);      keyboard.dy = Math.round(keyboard.dy*Math.pow(10,2))/Math.pow(10,2);    }	}	return keyboard;}